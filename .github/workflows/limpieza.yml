name: Limpieza Automática de PNGs

# Se activa al hacer push
on: [push]

jobs:
  borrar-pngs-viejos:
    runs-on: ubuntu-latest
    permissions:
      contents: write
    
    steps:
      - name: Chequear código
        uses: actions/checkout@v3

      - name: Ejecutar Limpieza
        run: |
          # 1. Configurar identidad
          git config --global user.name 'Limpiador Automatico'
          git config --global user.email 'bot@noreply.github.com'
          
          # 2. BORRAR PNGs EN LA CARPETA RAÍZ 'assets'
          # (Esto no tocará la carpeta 'android/res' donde están tus iconos)
          echo "Buscando archivos PNG en la carpeta raiz assets..."
          find assets -name "*.png" -type f -delete
          
          # 3. Guardar cambios
          if [[ `git status --porcelain` ]]; then
            git add -u
            git commit -m "LIMPIEZA: Eliminados PNGs viejos de la carpeta assets raiz"
            git push
            echo "¡Limpieza completada con éxito!"
          else
            echo "No se encontraron archivos PNG para borrar."
          fi
